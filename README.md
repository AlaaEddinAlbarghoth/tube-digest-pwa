# TubeDigest PWA

> **Your daily YouTube video summaries powered by AI** - A Progressive Web App that delivers AI-generated summaries of your YouTube subscriptions, helping you stay informed without watching every video.

## ðŸŽ¯ What is TubeDigest?

TubeDigest is a mobile-first PWA that connects to your YouTube Summarizer backend (Google Apps Script) to fetch and display AI-generated summaries of videos from your subscribed channels. Key features include:

- **Daily Digest** - See today's videos at a glance with priority indicators
- **AI Summaries** - Short, medium, and full summaries generated by LLMs
- **Key Ideas & Action Items** - Extracted insights in bullet-point format
- **Smart Filtering** - Filter by date, priority, category, and channel
- **Read Tracking** - Mark videos as read to track your progress
- **Activity Logs** - Monitor backend run history and video processing stats
- **Offline Support** - PWA with service worker for offline access

---

## ðŸš€ Tech Stack

| Layer | Technology |
|-------|------------|
| **UI Framework** | React 18 |
| **Language** | TypeScript (strict mode) |
| **Build Tool** | Vite |
| **Styling** | TailwindCSS 4 |
| **Routing** | React Router 6 |
| **State Management** | Zustand |
| **PWA** | vite-plugin-pwa + Workbox |

---

## ðŸ—ºï¸ Application Routes

| Route | Page | Description |
|-------|------|-------------|
| `/` | TodayDigestPage | Main dashboard with tabs (7d/3d/Today) and filters |
| `/videos` | VideosListPage | Full video archive with advanced filters and search |
| `/videos/:id` | VideoDetailsPage | Video details with summaries, key ideas, and actions |
| `/channels` | ChannelsListPage | Subscribed channels with stats and filters |
| `/activity` | ActivityLogsPage | Backend run history and processing stats |
| `/settings` | SettingsPage | User preferences, theme, and backend info |

---

## ðŸ“ Project Structure

```
tube-digest-pwa/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Core application setup
â”‚   â”‚   â”œâ”€â”€ App.tsx            # Root component with theme management
â”‚   â”‚   â””â”€â”€ routes.tsx         # React Router configuration
â”‚   â”œâ”€â”€ pages/                  # Page components
â”‚   â”‚   â”œâ”€â”€ TodayDigestPage/   # Main digest view
â”‚   â”‚   â”œâ”€â”€ VideosListPage/    # Full video list
â”‚   â”‚   â”œâ”€â”€ VideoDetailsPage/  # Single video details
â”‚   â”‚   â”œâ”€â”€ ChannelsListPage/  # Channel list
â”‚   â”‚   â”œâ”€â”€ ActivityLogsPage/  # Run history
â”‚   â”‚   â””â”€â”€ SettingsPage/      # User settings
â”‚   â”œâ”€â”€ components/             # Reusable components
â”‚   â”‚   â”œâ”€â”€ layout/            # AppLayout, TopBar, BottomNav
â”‚   â”‚   â”œâ”€â”€ features/          # VideoCard, RunLogItem
â”‚   â”‚   â”œâ”€â”€ digest/            # FilterBar
â”‚   â”‚   â””â”€â”€ shared/            # Button, Badge, Card, Toggle, etc.
â”‚   â”œâ”€â”€ state/                 # Zustand stores
â”‚   â”‚   â”œâ”€â”€ videosStore.ts     # Video data and filters
â”‚   â”‚   â”œâ”€â”€ channelsStore.ts   # Channel data
â”‚   â”‚   â”œâ”€â”€ logsStore.ts       # Activity logs
â”‚   â”‚   â””â”€â”€ settingsStore.ts   # User preferences (persisted)
â”‚   â”œâ”€â”€ api/                   # API layer
â”‚   â”‚   â”œâ”€â”€ client.ts          # HTTP client with error handling
â”‚   â”‚   â”œâ”€â”€ videosApi.ts       # Video endpoints
â”‚   â”‚   â”œâ”€â”€ channelsApi.ts     # Channel endpoints
â”‚   â”‚   â”œâ”€â”€ logsApi.ts         # Logs endpoints
â”‚   â”‚   â””â”€â”€ settingsApi.ts     # Settings/meta endpoints
â”‚   â”œâ”€â”€ types/                 # TypeScript interfaces
â”‚   â”œâ”€â”€ config/                # App constants
â”‚   â”œâ”€â”€ styles/                # Global CSS
â”‚   â””â”€â”€ pwa/                   # PWA registration
â”œâ”€â”€ docs/                      # Documentation
â”‚   â”œâ”€â”€ ARCHITECTURE.md        # System architecture
â”‚   â”œâ”€â”€ CODING_GUIDELINES.md   # Code standards
â”‚   â””â”€â”€ FEATURES.md            # Feature documentation
â””â”€â”€ public/                    # Static assets
```

---

## ðŸ› ï¸ Local Development

### Prerequisites

- **Node.js 18+** and **pnpm** installed
- A Google Apps Script backend URL (see Backend Integration)

### Setup

```bash
# 1. Install dependencies
pnpm install

# 2. Configure backend URL
cp .env.example .env
# Edit .env and set VITE_BACKEND_URL

# 3. Start development server
pnpm dev

# 4. Open http://localhost:5173
```

### ðŸ³ Run with Docker

Run the application locally using Docker (no Node.js required on host):

```bash
# 1. Configure environment
cp .env.example .env
# Edit .env and set BACKEND_BASE_URL

# 2. Run with Docker Compose
docker compose up --build

# 3. Open http://localhost:5173
```

## Deployment

### Vercel (Recommended for Frontend)

1.  Push your code to a GitHub repository.
2.  Import the project into Vercel.
3.  **Crucial Step:** In the Vercel Project Settings > **Environment Variables**, add:
    *   **Key:** `VITE_BACKEND_URL`
    *   **Value:** `https://script.google.com/macros/s/AKfycbxIcyOCoF1ELz2yRKFFpSH8Y_Uu38KaJoDXpjeYXkM7_ue-0mhL9UqQ5-ZdXz3ldPyk/exec` (Your Apps Script Web App URL)
4.  Deploy.

### Docker

1.  Build and run the container:
    ```bash
    docker compose up -d --build
    ```
2.  Access at `http://localhost:5173`.

### Build for Production

```bash
pnpm build      # Build for production
pnpm preview    # Preview production build locally
```

---

## ðŸ”Œ Backend Integration

TubeDigest connects to a **Google Apps Script** web app that:
1. Fetches videos from your YouTube subscriptions
2. Generates AI summaries using an LLM (Gemini/OpenAI)
3. Stores data in Google Sheets
4. Exposes a REST API for this PWA

### Required Backend Endpoints

The Apps Script backend must implement these endpoints:

| Endpoint | Method | Description |
|----------|--------|-------------|
| `?action=listVideos` | GET | Fetch videos with optional filters (dateRange, status, priority, channelId) |
| `?action=getVideo&id={id}` | GET | Get single video details with full summaries |
| `?action=markVideoRead` | POST | Mark a video as read |
| `?action=listChannels` | GET | Get all subscribed channels |
| `?action=listRuns` | GET | Get processing run history |
| `?action=getBackendInfo` | GET | Get backend metadata (schedule, version) |

### API Response Format

All endpoints return JSON with this structure:

```json
{
  "success": true,
  "data": { ... },
  "error": null
}
```

### Environment Configuration

Create a `.env` file with:

```env
VITE_BACKEND_URL=https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec
```

---

## ðŸ“± PWA Features

- **Installable** - Add to home screen on Android, iOS, and desktop
- **Offline-ready** - Service worker caches app shell
- **Auto-updates** - Prompts user when new version is available
- **Responsive** - Mobile-first design with bottom navigation

---

## ðŸŽ¨ Design System

| Token | Value |
|-------|-------|
| **Primary** | `#135bec` (Blue) |
| **Background (Dark)** | `#0a0a0a` / `#101622` |
| **Background (Light)** | `#ffffff` / `#f9fafb` |
| **Font** | System UI / Inter / Manrope |
| **Border Radius** | `0.75rem` (cards), `9999px` (pills) |

---

## ðŸ“– Documentation

- **[ARCHITECTURE.md](docs/ARCHITECTURE.md)** - System architecture and data flow
- **[CODING_GUIDELINES.md](docs/CODING_GUIDELINES.md)** - Code standards and patterns
- **[FEATURES.md](docs/FEATURES.md)** - Feature documentation per page
- **[Quickstart](docs/QUICKSTART.md)** - Quick setup guide
- **[Reference](docs/reference/CODE_REFERENCE.md)** - Codebase reference
- **[Reports](docs/reports/)** - Project status and progress reports

---

## ðŸ”§ Troubleshooting

### Build Errors
- Ensure `tsconfig.json` has proper path aliases
- Restart IDE after configuration changes

### PWA Not Installing
- PWA requires HTTPS in production
- Check manifest.json in DevTools â†’ Application

### API Connection Issues
- Verify `VITE_BACKEND_URL` in `.env`
- Check CORS settings in Apps Script
- Inspect Network tab for failed requests

---

## ðŸ“„ License

MIT

---

**Version:** 1.0.0  
**Last Updated:** 2025-12-04

---

## References

### Project Reference
- [Project Idea & Discussion](https://chatgpt.com/c/692fe539-bba8-832f-9a51-2405f17885cc)

### Design Reference
- [Stitch Project](https://stitch.withgoogle.com/projects/7484079189251965390)

### YouTube Digest Backend (Apps Script)
- [Google Apps Script Project](https://script.google.com/u/0/home/projects/1YoPbY_AK0pFIJ6eFv8FxtRyyA3p1hlBHW19n19VT-eKFLpBnZgllB_T_)

### YouTube Summarizer Backend (GitHub Repo)
- [yt-subscriptions-summarizer](https://github.com/AlaaEddinAlbarghoth/yt-subscriptions-summarizer)
